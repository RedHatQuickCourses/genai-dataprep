<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chunking Text in Large Language Models :: Data Preparation for Gen AI Applications</title>
    <link rel="prev" href="index.html">
    <link rel="next" href="hybrid.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Data Preparation for Gen AI Applications</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/genai-dataprep/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="genai-dataprep" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Data Preparation for Gen AI Applications</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../data-prep-intro.html">Data Preparation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../docling/index.html">Docling</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docling/arch.html">Architecture &amp; Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docling/install.html">Install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docling/cli.html">Docling CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docling/gui.html">Docling Web UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../docling/library.html">Docling Library</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../conversion/index.html">Conversion</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../conversion/batch.html">Batch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../conversion/multi-format.html">Multi-format</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../conversion/custom.html">Customizing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../conversion/image-table.html">Images and Tables</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../conversion/image-describe.html">Image Captions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Chunking &amp; Serialization</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="chunking.html">Why Chunking?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hybrid.html">Hybrid Chunking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="serialization.html">Serialization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../rag/index.html">RAG with Docling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../dpk/index.html">Data Prep Kit (DPK)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dpk/dpk-lab.html">Labs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Data Preparation for Gen AI Applications</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Data Preparation for Gen AI Applications</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Data Preparation for Gen AI Applications</a></li>
    <li><a href="index.html">Chunking &amp; Serialization</a></li>
    <li><a href="chunking.html">Why Chunking?</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Chunking Text in Large Language Models</h1>
<div class="sect1">
<h2 id="_the_importance_of_chunking_in_llms"><a class="anchor" href="#_the_importance_of_chunking_in_llms"></a>The Importance of Chunking in LLMs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Large Language Models can process and understand vast amounts of text. However, they are constrained by the amount of text they can process in a single prompt (this limit is called a <strong>Context Window</strong>). LLMs work with <em>tokens</em>. A <strong>token</strong> is the smallest unit of text a model can understand, roughly equivalent to a <em>word or a part of a word</em>.</p>
</div>
<div class="paragraph">
<p>To overcome this limitation, and to optimize computational and memory resources, it is necessary to break down large documents into smaller, manageable pieces for effective processing, retrieval, and generation of coherent and relevant text.</p>
</div>
<div class="paragraph">
<p>This process is known as <strong>Chunking</strong>. Chunking is the process of partitioning a large body of text into smaller segments, or "<strong>chunks</strong>."</p>
</div>
<div class="paragraph">
<p>Chunking has many benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Effective use of Context Windows</strong>: Chunking ensures that portions of the text can be fed to the model sequentially or in a targeted manner, allowing it to process documents of any length without losing crucial <em>semantic</em> information. There are specialized LLM models available that can chunk a large text based on the semantic meaning of the text. Several algorithms exist to control the chunking process to make maximal use of the context window size.</p>
</li>
<li>
<p><strong>Retrieval-Augmented Generation (RAG)</strong>: For tasks that require drawing information from a knowledge base, such as answering questions about a specific set of documents, chunking is a powerful technique that is an important part of a process called <strong>Retrieval-Augmented Generation (RAG)</strong>. In a RAG system, a large amount of text is first chunked, and then each chunk is converted into a numerical representation (an <em>embedding</em>). When a user queries the system, the system retrieves the most relevant chunks from the knowledge base and provides them to the LLM as <em>context</em>. This allows the model to generate a response that is not only relevant, but also improves accuracy. Without chunking, searching for relevant information within a massive, unstructured document would be computationally expensive and highly inefficient.</p>
</li>
<li>
<p><strong>Optimizing Computational and Memory Resources</strong>: Processing vast amounts of text is computationally intensive and demands significant memory. By breaking down a large document into smaller chunks, the computational load is distributed. Instead of processing an entire document in one go, the model can work on smaller, more manageable sections, leading to faster processing times and reduced memory consumption.</p>
</li>
<li>
<p><strong>Enhancing Performance, Accuracy, and Scalability</strong>: The quality of the chunks directly impacts the performance of the LLM. Effective chunking strategies aim to create segments that are <em>semantically coherent</em>, meaning that each chunk contains a complete thought or idea. This helps the model to better understand the context and generate more accurate and relevant outputs. Whether it&#8217;s summarizing a lengthy report or answering a specific question, well-defined chunks provide the model with focused and contextually rich information. This, in turn, allows LLM applications to scale and handle ever-increasing volumes of data without a significant drop in performance.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chunking_techniques"><a class="anchor" href="#_chunking_techniques"></a>Chunking Techniques</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Different strategies can be employed based on the nature of the text and the specific application being built:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Fixed-Size Chunking</strong>: The simplest method, where the text is divided into chunks of a <em>fixed</em> size. While easy to implement, it can sometimes splits sentences in a manner that disrupts the semantic meaning of the text.</p>
</li>
<li>
<p><strong>Recursive/Hierarchial Chunking</strong>: A more sophisticated approach that attempts to maintain <em>semantic integrity</em> by splitting the text based on a hierarchy of separators, such as paragraphs, sentences, and words.</p>
</li>
<li>
<p><strong>Semantic Chunking</strong>: This advanced technique uses the meaning of the text to guide the splitting process. It aims to create chunks that are semantically cohesive, ensuring that each chunk represents a distinct topic or concept.</p>
</li>
<li>
<p><strong>Custom Chunking</strong>: For structured documents like PDFs or program code, the chunking can be guided by the document&#8217;s inherent structure, such as splitting by sections, headings, paragraphs, or, in the case of code, by classes, modules or functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no single, perfect, "optimum" chunk size. Instead, you arrive at an optimum chunking strategy that balances trade-offs and is validated through evaluation and iterative testing. The optimal size is a function of your primary use case, your chosen embedding model, and your LLM&#8217;s context window. The key is to start with an informed baseline and then iterate based on performance.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Chunking size tradeoffs</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">Smaller Chunks (e.g., 100-500 chars)</th>
<th class="tableblock halign-left valign-top">Larger Chunks (e.g., 1500-5000 chars)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieval Precision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>High.</strong> Chunks are focused on a specific topic, so a query is likely to match a highly relevant chunk.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lower.</strong> A chunk may contain the answer but also a lot of irrelevant "noise," which can dilute the meaning and confuse the LLM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Context Preservation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Low.</strong> The full context surrounding a piece of information may be split across multiple chunks, leading to fragmentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>High.</strong> The chunk contains more surrounding information, helping the LLM understand the nuances of the retrieved text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cost &amp; Speed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cheaper.</strong> Smaller chunks mean fewer tokens are passed to the LLM in each prompt, reducing API costs and speeding up generation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>More Expensive.</strong> Larger prompts cost more and can take longer for the LLM to process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Risk of Missing Data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Higher.</strong> A single, cohesive idea that is slightly too long might be split, making it impossible to retrieve the full answer from one chunk.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Lower.</strong> More likely to contain the full, unbroken answer to a query.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Chunking &amp; Serialization</a></span>
  <span class="next"><a href="hybrid.html">Hybrid Chunking</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
